<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LegoStore â€“ Storage Viewer</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f4f4f4;
      color: #333;
      min-height: 100vh;
    }

    /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    header {
      background: #1a1a2e;
      color: #fff;
      padding: 14px 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    header .logo { font-size: 1.6rem; }
    header h1   { font-size: 1.2rem; font-weight: 600; letter-spacing: 0.03em; }

    /* â”€â”€ Legend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .legend {
      background: #fff;
      border-bottom: 1px solid #ddd;
      padding: 8px 24px;
      display: flex;
      align-items: center;
      gap: 20px;
      font-size: 0.78rem;
      color: #555;
      flex-wrap: wrap;
    }
    .legend-item { display: flex; align-items: center; gap: 6px; }
    .legend-swatch {
      width: 28px; height: 12px;
      border-radius: 2px;
      border: 1px solid #bbb;
    }
    .swatch-empty   { background: #43a047; border-color: #2e7d32; }
    .swatch-partial {
      background: linear-gradient(to right, #43a047 25%, #ddd 25%);
      border-color: #9e9e9e;
    }
    .swatch-full    { background: #ddd; border-color: #bbb; }

    /* â”€â”€ Cabinet tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .tabs-bar {
      background: #16213e;
      display: flex;
      padding: 0 16px;
      gap: 2px;
      overflow-x: auto;
    }
    .tab-btn {
      padding: 10px 22px;
      border: none;
      background: transparent;
      color: #9aa;
      cursor: pointer;
      font-size: 0.88rem;
      font-weight: 500;
      border-bottom: 3px solid transparent;
      transition: color 0.15s, border-color 0.15s;
      white-space: nowrap;
    }
    .tab-btn:hover  { color: #fff; }
    .tab-btn.active { color: #fff; border-bottom-color: #e94560; }

    /* â”€â”€ Cabinet panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .cabinet-panel { display: none; padding: 24px; }
    .cabinet-panel.active { display: block; }

    /* â”€â”€ Case group â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .case-group { margin-bottom: 32px; }
    .case-group-title {
      font-size: 0.78rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #888;
      margin-bottom: 10px;
    }
    .case-group-grid {
      display: grid;
      gap: 6px;
      width: fit-content;
    }

    /* â”€â”€ Container cell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .container-cell {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
    }

    /* 3 : 1 aspect ratio  â†’  90 Ã— 30 px */
    .container-rect {
      width: 90px;
      height: 30px;
      border-radius: 3px;
      border: 1px solid #ccc;
      background: #ddd;
      position: relative;
      overflow: hidden;
    }

    /* Fully empty: solid green */
    .container-rect.fully-empty {
      background: #43a047;
      border-color: #2e7d32;
    }

    /* Partially empty: proportional green fill from the left */
    .container-rect.partially-empty .fill {
      position: absolute;
      left: 0; top: 0; bottom: 0;
      background: #43a047;
    }

    .container-label {
      font-size: 10px;
      color: #999;
      line-height: 1;
    }
  </style>
</head>
<body>

<header>
  <span class="logo">ðŸ§±</span>
  <h1>LegoStore â€“ Storage Viewer</h1>
</header>

<div class="legend">
  <strong>Legend:</strong>
  <div class="legend-item">
    <div class="legend-swatch swatch-empty"></div>
    Fully empty
  </div>
  <div class="legend-item">
    <div class="legend-swatch swatch-partial"></div>
    Partially empty (any free sections)
  </div>
  <div class="legend-item">
    <div class="legend-swatch swatch-full"></div>
    Fully occupied
  </div>
</div>

<div class="tabs-bar" id="tabs-bar"></div>
<div id="panels-container"></div>

<script>
  // â”€â”€ Container-type config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // gridCols: max columns in a case group of this type
  // sections: number of sections in one container of this type
  const TYPE_CONFIG = {
    PX12: { gridCols: 12, sections: 12 },
    PX6:  { gridCols:  6, sections:  6 },
    PX4:  { gridCols:  6, sections:  4 },
    PX2:  { gridCols:  6, sections:  2 },
  };

  // â”€â”€ Helper: build a container array â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function makeContainers(startId, emptyList, totalSections) {
    return emptyList.map((empty, i) => ({
      id:            startId + i,
      emptySections: empty,
      totalSections,
    }));
  }

  // â”€â”€ Sample store data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const storeData = {
    cabinets: [
      {
        id: "cab-a",
        name: "Cabinet A",
        caseGroups: [
          {
            label: "Case Group 1",
            type: "PX12",
            containers: makeContainers(1001, [
              12, 12, 0,  2,  1, 12, 0, 12, 12,  0,  2,  1,
               0, 12, 12, 0,  12, 2,  1,  0, 12, 12,  0,  12,
            ], 12),
          },
          {
            label: "Case Group 2",
            type: "PX6",
            containers: makeContainers(2001, [
              6, 0, 6, 0, 6, 0,
              0, 6, 0, 6, 3, 6,
              6, 6, 0, 0, 6, 6,
            ], 6),
          },
        ],
      },
      {
        id: "cab-b",
        name: "Cabinet B",
        caseGroups: [
          {
            label: "Case Group 3",
            type: "PX4",
            containers: makeContainers(3001, [
              4, 0, 4, 0, 4, 0,
              0, 4, 0, 4, 2, 4,
              4, 0, 4, 4, 0, 0,
              0, 4, 4, 0, 4, 0,
            ], 4),
          },
          {
            label: "Case Group 4",
            type: "PX2",
            containers: makeContainers(4001, [
              2, 0, 2, 0, 2, 0,
              0, 2, 0, 2, 0, 2,
              2, 2, 0, 0, 2, 2,
            ], 2),
          },
        ],
      },
      {
        id: "cab-c",
        name: "Cabinet C",
        caseGroups: [
          {
            label: "Case Group 5",
            type: "PX12",
            containers: makeContainers(5001, [
              12, 12,  2,  1,  0,  0, 12, 12,  0, 12,  1, 12,
               0, 12,  0, 12,  2,  0, 12, 12, 12,  0,  0, 12,
              12,  0, 12,  2, 12,  1,  0,  0, 12, 12,  0, 12,
            ], 12),
          },
        ],
      },
    ],
  };

  // â”€â”€ Colour class for a container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function colorClass(container) {
    const { emptySections, totalSections } = container;
    if (emptySections === totalSections) return "fully-empty";
    if (emptySections > 0) return "partially-empty";
    return "";
  }

  // â”€â”€ Render one container cell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function renderContainer(c) {
    const cls  = colorClass(c);
    const fill = cls === "partially-empty"
      ? `<div class="fill" style="width:${Math.round(c.emptySections / c.totalSections * 100)}%"></div>`
      : "";
    const label = "#" + String(c.id).padStart(4, "0");
    return `<div class="container-cell">
      <div class="container-rect ${cls}">${fill}</div>
      <span class="container-label">${label}</span>
    </div>`;
  }

  // â”€â”€ Render one case group â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function renderCaseGroup(cg) {
    const cfg  = TYPE_CONFIG[cg.type] || { gridCols: 6 };
    const cols = cfg.gridCols;
    const cells = cg.containers.map(renderContainer).join("\n");
    return `<div class="case-group">
      <div class="case-group-title">${cg.label} &mdash; ${cg.type}</div>
      <div class="case-group-grid" style="grid-template-columns: repeat(${cols}, auto)">
        ${cells}
      </div>
    </div>`;
  }

  // â”€â”€ Render one cabinet panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function renderCabinet(cab) {
    const groups = cab.caseGroups.map(renderCaseGroup).join("\n");
    return `<div class="cabinet-panel" id="panel-${cab.id}">${groups}</div>`;
  }

  // â”€â”€ Switch active tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function switchTab(btn) {
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    document.querySelectorAll(".cabinet-panel").forEach(p => p.classList.remove("active"));
    btn.classList.add("active");
    const panel = document.getElementById(btn.dataset.target);
    if (panel) panel.classList.add("active");
  }

  // â”€â”€ Bootstrap â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  (function render() {
    const tabsBar   = document.getElementById("tabs-bar");
    const container = document.getElementById("panels-container");

    storeData.cabinets.forEach((cab, i) => {
      // Tab button
      const btn = document.createElement("button");
      btn.className    = "tab-btn" + (i === 0 ? " active" : "");
      btn.textContent  = cab.name;
      btn.dataset.target = "panel-" + cab.id;
      btn.addEventListener("click", () => switchTab(btn));
      tabsBar.appendChild(btn);

      // Panel
      container.insertAdjacentHTML("beforeend", renderCabinet(cab));
    });

    // Show first panel
    const first = document.getElementById("panel-" + storeData.cabinets[0].id);
    if (first) first.classList.add("active");
  })();
</script>
</body>
</html>
